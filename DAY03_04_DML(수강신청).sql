--테이블 삭제
DROP TABLE LECTURE_TBL;
DROP TABLE ENROLL_TBL;
DROP TABLE COURSE_TBL;
DROP TABLE STUDENT_TBL;
DROP TABLE PROFESSOR_TBL;
    
--교수 테이블 생성
CREATE TABLE PROFESSOR_TBL(
    PRO_NO   NUMBER             NOT NULL,  --VARCHAR2
    PRO_NAME VARCHAR2(15 BYTE)  NOT NULL,
    PRO_SBJ  VARCHAR2(100 BYTE) NOT NULL,
    CONSTRAINT PK_PRO PRIMARY KEY(PRO_NO)
);

--학생 테이블 생성
CREATE TABLE STUDENT_TBL(
    STU_NO     NUMBER             NOT NULL,
    STU_NAME   VARCHAR2(15 BYTE)  NOT NULL,
    STU_ADRESS VARCHAR2(100 BYTE) NULL,
    STU_GRADE  NUMBER             NOT NULL,
    PRO_NO     NUMBER             NOT NULL,
    CONSTRAINT PK_STU     PRIMARY KEY(STU_NO),
    CONSTRAINT FK_PRO_STU FOREIGN KEY(PRO_NO) REFERENCES PROFESSOR_TBL(PRO_NO) ON DELETE CASCADE
);

--과목 테이블 생성
CREATE TABLE COURSE_TBL(
    COU_NO   NUMBER            NOT NULL,
    COU_NAME VARCHAR2(30 BYTE) NOT NULL,
    CREDIT   NUMBER(1,2)       NULL,
    CONSTRAINT PK_COU PRIMARY KEY(COU_NO)
);

--수강신청 테이블 생성
CREATE TABLE ENROLL_TBL(
    EN_NO   NUMBER  NOT NULL,
    STU_NO  NUMBER  NOT NULL,
    COU_NO  NUMBER  NOT NULL,
    EN_DATE DATE    NULL,
    CONSTRAINT PK_EN     PRIMARY KEY(EN_NO),
    CONSTRAINT FK_STU_EN FOREIGN KEY(STU_NO) REFERENCES STUDENT_TBL(STU_NO) ON DELETE CASCADE,
    CONSTRAINT FK_COU_EN FOREIGN KEY(COU_NO) REFERENCES COURSE_TBL(COU_NO) ON DELETE CASCADE
);
    
--강의 테이블 생성
CREATE TABLE LECTURE_TBL(
    LECT_NO    NUMBER             NOT NULL,
    PRO_NO     NUMBER             NOT NULL,
    EN_NO      NUMBER             NOT NULL,
    LECT_NAME  VARCHAR2(100 BYTE) NOT NULL,
    LECT_PLACE VARCHAR2(30 BYTE)  NOT NULL,
    CONSTRAINT PK_LECT     PRIMARY KEY(LECT_NO),
    CONSTRAINT FK_PRO_LECT FOREIGN KEY(PRO_NO) REFERENCES PROFESSOR_TBL(PRO_NO),
    CONSTRAINT FK_EN_LECT  FOREIGN KEY(EN_NO)  REFERENCES ENROLL_TBL(EN_NO)
);

--교수 데이터 입력
INSERT INTO PROFESSOR_TBL VALUES (50, '가나다', '경영학');
INSERT INTO PROFESSOR_TBL VALUES (41, '라마바', '경제학');
INSERT INTO PROFESSOR_TBL VALUES (55, '사아자', '통계학');


--학생 데이터 입력
INSERT INTO STUDENT_TBL VALUES (202201111, '홍길동', '서울시 도봉구', 2, 50);
INSERT INTO STUDENT_TBL VALUES (202301234, '김철수', '경기도 수원시', 1, 41);
INSERT INTO STUDENT_TBL VALUES (202301995, '이영희', '서울시 중랑구', 1, 41);

--과목명 데이터 수정 -> 이수학점수정
ALTER TABLE COURSE_TBL MODIFY COU_NAME VARCHAR2(100 BYTE);
ALTER TABLE COURSE_TBL MODIFY CREDIT NUMBER;

--과목 데이터 입력
INSERT INTO COURSE_TBL VALUES (2201, '경영학', 3);
INSERT INTO COURSE_TBL VALUES (2304, '교양실습', 2);
INSERT INTO COURSE_TBL VALUES (2209, '경제통계', 3);

--수강신청 데이터 입력

--수강신청테이블 시퀀스
DROP SEQUENCE EN_SEQ;
CREATE SEQUENCE EN_SEQ ORDER;

INSERT INTO ENROLL_TBL VALUES (EN_SEQ.NEXTVAL, 202201111, 2201, '2023-02-10');
INSERT INTO ENROLL_TBL VALUES (EN_SEQ.NEXTVAL, 202301995, 2201, '2023-02-11');
INSERT INTO ENROLL_TBL VALUES (EN_SEQ.NEXTVAL, 202301234, 2304, '2023-02-10');

--강의테이블 시퀀스
DROP SEQUENCE LECT_SEQ;
CREATE SEQUENCE LECT_SEQ ORDER;

INSERT INTO LECTURE_TBL VALUES (LECT_SEQ.NEXTVAL, 50, 1, '경영학', '생활관');
INSERT INTO LECTURE_TBL VALUES (LECT_SEQ.NEXTVAL, 41, 2, '경영학', '생활관');
INSERT INTO LECTURE_TBL VALUES (LECT_SEQ.NEXTVAL, 55, 3, '교양실습', '미래관');


COMMIT;

--INSERT INTO 작성시 칼럼명은 생략하지않고 작성한다.









